<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ data.particulars.name }} - Resume</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.5;
            background: #fff;
            color: #333;
            margin: 0;
            padding: 0;
        }
        .page {
            max-width: 800px;
            margin: 20px auto;
            padding: 40px;
            border: 1px solid #ddd;
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
        }
        /* Header */
        .resume-header {
            text-align: center;
            border-bottom: 2px solid #eee;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        .resume-header h1 {
            margin: 0;
            font-size: 2.5em;
            color: #000;
        }
        .contact-info {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
            font-size: 0.9em;
            color: #555;
        }
        .contact-info span {
            white-space: nowrap;
        }
        /* Sections */
        .section {
            margin-bottom: 25px;
        }
        .section h2 {
            font-size: 1.4em;
            color: #007bff;
            border-bottom: 2px solid #007bff;
            padding-bottom: 5px;
            margin-bottom: 15px;
        }
        /* Items */
        .item {
            margin-bottom: 15px;
        }
        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
        }
        .item-header h3 {
            margin: 0;
            font-size: 1.1em;
            color: #000;
        }
        .item-header .duration {
            font-style: italic;
            font-size: 0.9em;
            color: #555;
        }
        .item-subheader {
            font-weight: bold;
            color: #333;
            margin-top: 2px;
        }
        .item-description {
            font-size: 0.95em;
            margin-top: 5px;
            /* Allow line breaks from textarea */
            white-space: pre-wrap;
        }
        .item-skills {
            font-size: 0.9em;
            margin-top: 5px;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="page">
        
        <header class="resume-header">
            {% if data.particulars.name %}
                <h1>{{ data.particulars.name }}</h1>
            {% endif %}
            <div class="contact-info">
                {% if data.particulars.email %}
                    <span>{{ data.particulars.email }}</span>
                {% endif %}
                {% if data.particulars.country %}
                    <span>{{ data.particulars.country }}</span>
                {% endif %}
                {% if data.particulars.languages %}
                    <span>Languages: {{ data.particulars.languages | join(', ') }}</span>
                {% endif %}
            </div>
            <div class="contact-info">
                {% for link in data.particulars.links %}
                    <span><a href="{{ link }}">{{ link | replace("https://", "") }}</a></span>
                {% endfor %}
            </div>
        </header>

        {% if data.experiences %}
        <section class="section">
            <h2>Work Experience</h2>
            {% for exp in data.experiences | sort(attribute='dateStarted', reverse=true) %}
            <div class="item">
                <div class="item-header">
                    <h3>{{ exp.title }}</h3>
                    <span class="duration">
                        {{ exp.dateStarted }} to
                        {% if exp.dateEnded == 'Present' %}Present
                        {% elif exp.dateEnded %}{{ exp.dateEnded }}
                        {% endif %}
                    </span>
                </div>
                <div class="item-subheader">{{ exp.company }}</div>
                <p class="item-description">{{ exp.jobDescription }}</p>
                {% if exp.skills %}
                    <p class="item-skills"><strong>Skills:</strong> {{ exp.skills | join(', ') }}</p>
                {% endif %}
            </div>
            {% endfor %}
        </section>
        {% endif %}
        
        {% if data.education %}
        <section class="section">
            <h2>Education</h2>
            {% for edu in data.education | sort(attribute='dateStarted', reverse=true) %}
            <div class="item">
                <div class="item-header">
                    <h3>{{ edu.nameOfCertificate }}</h3>
                    <span class="duration">
                        {{ edu.dateStarted }} to
                        {% if edu.dateAttained == 'Present' %}Present
                        {% elif edu.dateAttained %}{{ edu.dateAttained }}
                        {% endif %}
                    </span>
                </div>
                <div class="item-subheader">{{ edu.nameOfInstitution }}</div>
            </div>
            {% endfor %}
        </section>
        {% endif %}
        
        {% if data.projects %}
        <section class="section">
            <h2>Professional Projects</h2>
            {% for proj in data.projects | sort(attribute='projectDate', reverse=true) %}
            <div class="item">
                <div class="item-header">
                    <h3>{{ proj.projectName }}</h3>
                    <span class="duration">{{ proj.projectDate }}</span>
                </div>
                <div class="item-subheader">{{ proj.companyName }}</div>
                <p class="item-description">{{ proj.projectDescription }}</p>
            </div>
            {% endfor %}
        </section>
        {% endif %}

        {% if data.awards %}
        <section class="section">
            <h2>Awards and Honours</h2>
            {% for awd in data.awards | sort(attribute='awardDate', reverse=true) %}
            <div class="item">
                <div class="item-header">
                    <h3>{{ awd.awardName }}</h3>
                    <span class="duration">{{ awd.awardDate }}</span>
                </div>
                <div class="item-subheader">{{ awd.awardInstitution }}</div>
                <p class="item-description">{{ awd.awardDescription }}</p>
            </div>
            {% endfor %}
        </section>
        {% endif %}
        
    </div>
</body>
</html>